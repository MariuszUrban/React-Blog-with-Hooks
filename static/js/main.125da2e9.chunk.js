(this["webpackJsonpreact-blog-app"]=this["webpackJsonpreact-blog-app"]||[]).push([[0],{2:function(e,t,c){"use strict";c.d(t,"h",(function(){return s})),c.d(t,"f",(function(){return a})),c.d(t,"g",(function(){return o})),c.d(t,"i",(function(){return i})),c.d(t,"e",(function(){return d})),c.d(t,"b",(function(){return h})),c.d(t,"c",(function(){return p})),c.d(t,"a",(function(){return x})),c.d(t,"d",(function(){return f}));var n=c(0),r=c(5);function s(){return Object(n.useContext)(r.b)}function a(e=r.a){return Object(n.useContext)(e).dispatch}function o(){return Object(n.useContext)(r.a).state.posts}function i(){return Object(n.useContext)(r.a).state.user}var j=c(26),b=c(3),u=c(23),l=c(24);function d(e=200){const t=Object(n.useState)(""),c=Object(b.a)(t,2),r=c[0],s=c[1],a=Object(u.a)(""),o=Object(b.a)(a,2),i=o[0],d=o[1],O=d.set,h=Object(j.a)(d,["set"]),p=Object(l.useDebouncedCallback)((e=>{O(e)}),e),x=Object(b.a)(p,2),f=x[0],m=x[1];Object(n.useEffect)((()=>{m(),s(i.present)}),[m,i]);return[r,Object(n.useCallback)((function(e){s(e),f(e)}),[s,f]),h]}var O=c(9);function h(){return Object(O.b)(((e,t)=>({url:"/login/".concat(encodeURI(e),"/").concat(encodeURI(t)),method:"get"})))}function p(){return Object(O.b)(((e,t)=>({url:"/users",method:"post",data:{username:e,password:t}})))}function x(){return Object(O.b)((({title:e,content:t,author:c})=>({url:"/posts",method:"post",data:{title:e,content:t,author:c}})))}function f(){return Object(O.b)((()=>({url:"/themes",method:"get"})))}},31:function(e,t,c){},5:function(e,t,c){"use strict";c.d(t,"a",(function(){return s})),c.d(t,"b",(function(){return a}));var n=c(0),r=c.n(n);const s=r.a.createContext({state:{},dispatch:()=>{}}),a=r.a.createContext({primaryColor:"deepskyblue",secondaryColor:"coral"})},66:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c.n(n),s=c(21),a=c.n(s),o=(c(31),c(3)),i=c(8),j=c(6),b=c(5),u=c(9),l=c(4),d=c(2),O=c(1);function h({id:e,title:t,content:c,author:n,short:r=!1}){console.log("rendering Post");const s=Object(d.h)().secondaryColor;let a=c;return r&&c.length>30&&(a=c.substring(0,30)+"..."),Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{style:{color:s},children:t}),Object(O.jsx)("div",{children:a}),r&&Object(O.jsxs)("div",{children:[Object(O.jsx)("br",{}),Object(O.jsx)(i.a,{href:"/view/".concat(e),children:"View full post"})]}),Object(O.jsx)("br",{}),Object(O.jsxs)("i",{children:["Written by ",Object(O.jsx)("b",{children:n})]})]})}var p=r.a.memo(h,((e,t)=>e.title===t.title&&e.content===t.content&&e.author===t.author));function x(){const e=Object(d.g)();return Object(O.jsx)("div",{children:e.map(((e,t)=>Object(O.jsxs)(r.a.Fragment,{children:[Object(O.jsx)(p,Object(l.a)(Object(l.a)({},e),{},{short:!0})),Object(O.jsx)("hr",{})]},t)))})}function f(){const e=Object(n.useContext)(b.a),t=e.state,c=e.dispatch,r=t.error,s=Object(u.b)((()=>({url:"/posts",method:"get"}))),a=Object(o.a)(s,2),i=a[0],j=a[1];return Object(n.useEffect)(j,[]),Object(n.useEffect)((()=>{i&&i.error&&c({type:"POSTS_ERROR"}),i&&i.data&&c({type:"FETCH_POSTS",posts:i.data.reverse()})}),[c,i]),Object(O.jsxs)("div",{children:[r&&Object(O.jsx)("b",{children:r}),Object(O.jsx)(x,{})]})}var m=c(25),v=c.n(m),g=c(10);function y(){const e=Object(d.i)(),t=Object(d.f)(),c=Object(g.a)(""),r=c.value,s=c.bindToInput,a=Object(d.e)(),j=Object(o.a)(a,3),b=j[0],u=j[1],h=j[2],p=h.undo,x=h.redo,f=h.canUndo,m=h.canRedo,v=Object(d.a)(),y=Object(o.a)(v,2),C=y[0],w=y[1],T=Object(i.e)();return Object(n.useEffect)((()=>{C&&C.data&&(t(Object(l.a)({type:"CREATE_POST"},C.data)),T.navigate("/view/".concat(C.data.id)))}),[t,T,C]),Object(O.jsxs)("form",{onSubmit:t=>{t.preventDefault(),w({title:r,content:b,author:e})},children:[Object(O.jsxs)("div",{children:["Author: ",Object(O.jsx)("b",{children:e})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"create-title",children:"Title:"}),Object(O.jsx)("input",Object(l.a)(Object(l.a)({type:"text",value:r},s),{},{name:"create-title",id:"create-title"}))]}),Object(O.jsx)("textarea",{value:b,onChange:function(e){const t=e.target.value;u(t)}}),Object(O.jsx)("button",{type:"button",onClick:p,disabled:!f,children:"Undo"}),Object(O.jsx)("button",{type:"button",onClick:x,disabled:!m,children:"Redo"}),Object(O.jsx)("input",{type:"submit",value:"Create"})]})}function C(){const e=Object(d.f)(),t=Object(g.a)(""),c=t.value,r=t.bindToInput,s=Object(n.useState)(!1),a=Object(o.a)(s,2),i=a[0],j=a[1],b=Object(g.a)(""),u=b.value,h=b.bindToInput,p=Object(d.b)(),x=Object(o.a)(p,2),f=x[0],m=x[1];return function(e,t,c){Object(n.useEffect)((()=>{e&&e.data&&(e.data.length>0?(c(!1),t({type:"LOGIN",username:e.data[0].username})):c(!0)),e&&e.error&&c(!0)}),[t,e,c])}(f,e,j),Object(O.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m(c,u)},children:[Object(O.jsx)("label",{htmlFor:"login-username",children:"Username:"}),Object(O.jsx)("input",Object(l.a)(Object(l.a)({type:"text",value:c},r),{},{name:"login-username",id:"login-username"})),Object(O.jsx)("label",{htmlFor:"login-password",children:"Password:"}),Object(O.jsx)("input",Object(l.a)(Object(l.a)({type:"password",value:u},h),{},{name:"login-password",id:"login-password"})),Object(O.jsx)("input",{type:"submit",value:"Login",disabled:0===c.length}),i&&Object(O.jsx)("span",{style:{color:"red"},children:"Invalid username or password"})]})}function w(){const e=Object(d.f)(),t=Object(g.a)(""),c=t.value,r=t.bindToInput,s=Object(g.a)(""),a=s.value,i=s.bindToInput,j=Object(g.a)(""),b=j.value,u=j.bindToInput,h=Object(d.c)(),p=Object(o.a)(h,2),x=p[0],f=p[1];return function(e,t){Object(n.useEffect)((()=>{e&&e.data&&t({type:"REGISTER",username:e.data.username})}),[t,e])}(x,e),Object(O.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f(c,a)},children:[Object(O.jsx)("label",{htmlFor:"register-username",children:"Username:"}),Object(O.jsx)("input",Object(l.a)(Object(l.a)({type:"text",value:c},r),{},{name:"register-username",id:"register-username"})),Object(O.jsx)("label",{htmlFor:"register-password",children:"Password:"}),Object(O.jsx)("input",Object(l.a)(Object(l.a)({type:"password",value:a},i),{},{name:"register-password",id:"register-password"})),Object(O.jsx)("label",{htmlFor:"register-password-repeat",children:"Repeat password:"}),Object(O.jsx)("input",Object(l.a)(Object(l.a)({type:"password",value:b},u),{},{name:"register-password-repeat",id:"register-password-repeat"})),Object(O.jsx)("input",{type:"submit",value:"Register",disabled:0===c.length||0===a.length||a!==b})]})}const T=r.a.lazy((()=>c.e(3).then(c.bind(null,68))));function R(){return Object(d.i)()?Object(O.jsx)(T,{}):Object(O.jsxs)(r.a.Fragment,{children:[Object(O.jsx)(C,{}),Object(O.jsx)(w,{})]})}var E=({text:e})=>{const t=Object(d.h)().primaryColor;return Object(O.jsx)("h1",{style:{color:t},children:e})};function S({theme:e,active:t,onClick:c}){return Object(O.jsxs)("span",{onClick:c,style:{cursor:"pointer",paddingLeft:8,fontWeight:t?"bold":"normal"},children:[Object(O.jsx)("span",{style:{color:e.primaryColor},children:"Primary"})," / ",Object(O.jsx)("span",{style:{color:e.secondaryColor},children:"Secondary"})]})}function k({theme:e,setTheme:t}){const c=Object(d.d)(),r=Object(o.a)(c,2),s=r[0],a=r[1],i=s.data,j=s.isLoading;function b(t){return t.primaryColor===e.primaryColor&&t.secondaryColor===e.secondaryColor}return Object(n.useEffect)(a,[]),Object(O.jsxs)("div",{children:["Change theme:",j&&" Loading themes...",i&&i.map(((e,c)=>Object(O.jsx)(S,{theme:e,active:b(e),onClick:()=>t(e)},"theme-"+c)))]})}function I({setTheme:e}){const t=Object(n.useContext)(b.b),c=Object(n.useContext)(b.a).state.user,s=v()().innerWidth<640;return Object(O.jsxs)("div",{children:[Object(O.jsx)(E,{text:"React Hooks Blog"}),!s&&Object(O.jsx)(k,{theme:t,setTheme:e}),!s&&Object(O.jsx)("br",{}),!s&&Object(O.jsx)(r.a.Suspense,{fallback:"Loading...",children:Object(O.jsx)(R,{})}),!s&&Object(O.jsx)("br",{}),c&&Object(O.jsx)(y,{})]})}function P({id:e}){const t=Object(u.b)((()=>({url:"/posts/".concat(e),method:"get"}))),c=Object(o.a)(t,2),r=c[0],s=c[1];return Object(n.useEffect)(s,[e]),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:Object(O.jsx)(i.a,{href:"/",children:"Go back"})}),r&&r.data?Object(O.jsx)(p,Object(l.a)({},r.data)):"Loading...",Object(O.jsx)("hr",{})]})}function F(){const e=Object(i.d)().url;return Object(O.jsx)("div",{children:Object(O.jsx)("a",{href:e.href,children:e.href})})}function L(e,t){switch(t.type){case"LOGIN":case"REGISTER":return t.username;case"LOGOUT":return"";default:return e}}function U(e,t){switch(t.type){case"FETCH_POSTS":return t.posts;case"CREATE_POST":return[{title:t.title,content:t.content,author:t.author,id:t.id},...e];default:return e}}function G(e,t){switch(t.type){case"POSTS_ERROR":return"Failed to fetch posts";default:return e}}function _(e,t){return{user:L(e.user,t),posts:U(e.posts,t),error:G(e.error,t)}}const B=Object(j.g)({"/":Object(j.h)({view:Object(O.jsx)(f,{})}),"/view/:id":Object(j.h)((e=>({view:Object(O.jsx)(P,{id:e.params.id})})))});function H(){const e=Object(n.useState)({primaryColor:"deepskyblue",secondaryColor:"coral"}),t=Object(o.a)(e,2),c=t[0],r=t[1],s=Object(n.useReducer)(_,{user:"",posts:[],error:""}),a=Object(o.a)(s,2),j=a[0],u=a[1],l=j.user;return Object(n.useEffect)((()=>{document.title=l?"".concat(l," - React Hooks Blog"):"React Hooks Blog"}),[l]),Object(O.jsx)(b.a.Provider,{value:{state:j,dispatch:u},children:Object(O.jsx)(b.b.Provider,{value:c,children:Object(O.jsx)(i.b,{routes:B,children:Object(O.jsxs)("div",{style:{padding:8},children:[Object(O.jsx)(I,{setTheme:r}),Object(O.jsx)("hr",{}),Object(O.jsx)(i.c,{}),Object(O.jsx)(F,{})]})})})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=c(11);const D=c.n(W).a.create({baseURL:"http://localhost:3000/api/"});a.a.render(Object(O.jsx)(u.a,{value:D,children:Object(O.jsx)(H,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))}},[[66,1,2]]]);
//# sourceMappingURL=main.125da2e9.chunk.js.map